#stack #heap #куча #стек
Оба типа хранилища находятся в оперативной памяти. Это разделы памяти, в которых мы можем хранить данные. Отличия в том, как C++ выделит нам эту память.
```c++
// Stack
int sVal = 5;
int sArr[5]{};

// Heap
int* hVal = new int;
*hVal = 5;
int* hArr = new int[5];
```
В `stack` память выделяется плюс/минус близко друг к другу. Когда мы выделяем новую память, `stack pointer` продвигается на требуемое количество памяти и получаем нужный адрес в `stack pointer`. Это довольно быстро с точки зрения CPU.

Память в `heap` требуется освобождать вручную, когда в `stack` память удаляется автоматически при выходе за область видимости (условно `stack pointer` возвращается в ту позицию, в которой был при входе в область видимости)

`heap` выделяется за счет оператора `new`, который по сути вызывает `malloc`. В основном используется `free list`, в котором ведется учет - какая область свободна, а какая нет, где она находится. В случае если находится свободная область, удовлетворяющая размеры - возвращается указатель на эту область. При это сохраняется выделенный размер и проч информация в зависимости от реализации `malloc`.
При выделении памяти в `heap` выполняется вполне много действий, поэтому лучше использовать `stack`, если это возможно. Если надо, чтоб память держалась дольше, чем scope, или нужно выделить много памяти – то ее придется выделять в `heap`.